tasks:
  - init: |
      docker run --name backstage-postgres -e POSTGRES_PASSWORD=mysecretpassword -d postgres
      echo "myapp" | npx @backstage/create-app
      cd myapp && yarn dev

  - name: Initialize 
    command: |
       echo "Almost ready - Running the PostgreSQL container (note: when the workspace is first started up, these commands both fail - please ignore) "
       docker start backstage-postgres


ports:
  # Backstage Web Application
  - port: 3000
    onOpen: open-preview
    visibility: public

  # Backstage Backend API
  - port: 7007
    onOpen: ignore
    visibility: public

vscode:
  extensions:
    - ms-azuretools.vscode-docker    